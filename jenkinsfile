pipeline {
    agent {node{label'ubuntu'}}
    stages {
    stage("ping"){
        steps{
            echo "pingen naar de slave..."
            sh " ansible-playbook playbook.yml"
      }
    }
    stage("image") {
      steps{
          echo "image aan het maken..."
          sh " ansible-playbook playbook_image.yml"
      }
    }
    stage("dockerfile") {
      steps{
          echo "dockerfile aan het lezen..."
          sh "pwd"
          sh "ls"
          sh " ansible-playbook playbook_dockerfile.yml"
      }
    }
    stage("container") {
      steps{
          echo "container aan het maken..."
          sh " ansible-playbook playbook_container.yml"
      }
    }
    stage('python script') {
      steps {
        node('raspberry pi') {
          dir("/home/pi/Desktop/jenkins_slave/workspace/Devops-project-rpi/hardware") {
            sh "pwd"
            sh "ls"
          }
        }
      }
    }
  }
  post {
    success{
      echo "file succesvol gestart"
    }
    failure{
      echo "ERROR in de file"
    }
  }
}
